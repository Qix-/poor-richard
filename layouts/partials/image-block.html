{{ $magicpixel := "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" }}
<!-- thanks to http://probablyprogramming.com/2009/03/15/the-tiniest-gif-ever -->

{{ if $imagename := .filename }}
  {{ $widthR := .widthRatio | default 16 }}
  {{ $heightR := .heightRatio | default 9 }}
  {{ $imgClass := printf "is-%dby%d" $widthR $heightR }}

  {{ $credit := .credit }}

  <figure class="{{ .figClass }}">
    {{- if .link -}}
      <a
        class="image {{ $imgClass }} has-background-grey-lighter"
        href="{{ .link }}"
      >
    {{- else -}}
      <div class="image {{ $imgClass }} has-background-grey-lighter">
    {{- end -}}
      <picture class="has-ratio">
        <img
          alt="{{ .description }}"
          title="{{ .description }}"
          data-path="{{ $imagename }}"
          src="{{ $magicpixel | safeURL }}"
          loading="lazy"
        >
      </picture>
    {{- if .link -}}
      </a>
    {{- else -}}
      </div>
    {{- end -}}
    {{ with $credit }}
      <figcaption class="is-clearfix is-size-7 is-uppercase has-text-grey-light">
        <span class="has-margin-top-thin is-single-spaced is-pulled-right">
          {{ $credit }}
        </span>
      </figcaption>
    {{ end }}
  </figure>
{{ end}}
