<!-- header tags that are the same on all pages -->

{{ $scssOptions := dict "outputStyle" "compressed" "enableSourceMap" true "includePaths" (slice "node_modules/bulma") }}
{{ $styles := resources.Get "css/main.scss" | toCSS $scssOptions | postCSS | minify | fingerprint }}
<link rel="stylesheet" href="{{ $styles.RelPermalink }}">

{{ if .Site.IsServer }}
  <script src="http://localhost:1234/main.js" defer></script>
{{ else }}
  {{ $js := resources.Get "js/main.js" | fingerprint }}
  <script src="{{ $js.RelPermalink }}" defer></script>
{{ end }}
{{ template "_internal/google_analytics_async.html" . }}
<script type="module" defer>
  window.ga("send", "event", {
    eventCategory: "Module detection",
    eventAction: "Supports modules",
    nonInteraction: true
  });
</script>
<script nomodule defer>
  window.ga("send", "event", {
    eventCategory: "Module detection",
    eventAction: "Does not support modules",
    nonInteraction: true
  });
</script>

{{ range slice "500" "800" "regular" }}
  <link rel="preload" as="font" href="/css/fonts/raleway-v13/raleway-v13-latin-ext_latin-{{ . }}.woff2" crossorigin>
{{ end }}

<link
  rel="alternate"
  type="application/json"
  href='{{ absURL "/feeds/full.json" }}'
  title="Full News Feed"
/>

<link
  rel="alternate"
  type="application/rss+xml"
  href='{{ absURL "/feeds/full.xml" }}'
  title="Full News Feed"
/>

{{ $icon := resources.Get (.Site.Param "favicon") }}
{{ range $size := slice "32x32" "128x128" "152x152" "167x167" "180x180" "192x192" "196x196" }}
  {{ $iconShrunk := $icon.Fit $size }}
  <link rel="shortcut icon" href="{{ $iconShrunk.Permalink }}" sizes="{{ $size }}">
  <link rel="apple-touch-icon" href="{{ $iconShrunk.Permalink }}" sizes="{{ $size }}">
{{ end }}
